<button class="btn btn-lg btn-default" style="float:right" type="submit" (click)="logout()">Logout</button>

<div class="container" *ngIf="currentUserRoles === 'admin'">
	<div class="col-sm-offset-2 col-sm-10">
		<h2 class="mb-4 font-weight-normal">{{ coinToEdit ? "Update Coin" : "Create a new Coin" }}</h2>
	</div>
	<form class="form-horizontal" [formGroup]="coinForm" (ngSubmit)="onSubmit()">
	    
	    <div class="form-group">
			<label class="control-label col-sm-2" for="email">Name:</label>
			<div class="col-sm-10">
	        	<input type="text" formControlName="name" class="form-control" placeholder="Name of the Coin" required autofocus>
	        </div>
	    </div>
	    <div class="form-group">
		    <label class="control-label col-sm-2" for="email">Ticker:</label>
			<div class="col-sm-10">
	 			<input type="text" formControlName="ticker" class="form-control" placeholder="Ticker" required>
	 		</div>
	    </div>
	    <div class="form-group">
		    <label class="control-label col-sm-2" for="email">Buy Price:</label>
			<div class="col-sm-10">
	 			<input type="text" formControlName="buyAmount" class="form-control" placeholder="Buy Price" required>
	 		</div>
	    </div>
	    <div class="form-group">
		    <label class="control-label col-sm-2" for="email">Sell Price:</label>
			<div class="col-sm-10">
	 			<input type="text" formControlName="sellAmount" class="form-control" placeholder="Sell Price" required>
	 		</div>
	    </div>
	    <div class="form-group">
		    <label class="control-label col-sm-2" for="email">Available Cryptos:</label>
			<div class="col-sm-10">
	 			<input type="text" formControlName="availableCryptos" class="form-control" placeholder="Available Cryptos" required>
	 		</div>
	    </div>
	    <div class="form-group">
	     	<div class="col-sm-offset-2 col-sm-10">
	    		<button class="btn btn-lg btn-default" [disabled]="!coinForm.valid" type="submit">{{ coinToEdit ? "Update" : "Create" }}</button>
	    		<button class="btn btn-lg btn-default" type="submit" (click)="resetForm()">Reset</button>
	    	</div>
	    </div>
	</form>
</div>

<div class="container" *ngIf="arr.length>0;else noData">
	<table class="table table-striped table-hover">
	    <thead>
	      <tr>
	        <th>Coin Name</th>
	        <th>Ticker</th>
	        <th>Buy Price</th>
	        <th>Sell Price</th>
	        <th>Available Cryptos</th>
	        <th>Actions</th>
	      </tr>
	    </thead>
	    <tbody>
	      <tr *ngFor="let item of arr">
	        <td>{{ item.name }}</td>
	        <td>{{ item.ticker }}</td>
	        <td>{{ item.buyAmount }}</td>
	        <td>{{ item.sellAmount }}</td>
	        <td>{{ item.availableCryptos }}</td>
	        <td *ngIf="currentUserRoles === 'admin'">
	        	<div class="btn-group">
		        	<button type="button" class="btn btn-primary" (click)="onEdit(item)">Edit</button>
		        	<button type="button" class="btn btn-danger" (click)="onDelete(item)">Delete</button>
	        	</div>
	        </td>
	        <td *ngIf="currentUserRoles === 'user'">
	    	    <button type="submit" class="btn btn-primary" (click)="onBuy(item)">Buy Coin</button>
	        </td>
	      </tr>
	    </tbody>
	</table>
	
</div>
<div class="container">
	<ng-template #noData>
		<hr>
		<h5>There are no coins to display</h5>
	</ng-template>
</div>


<div *ngIf="coinToBuy" class="backdrop" [ngStyle]="{'display':display}"></div>
<div class="modal" tabindex="-1" role="dialog"  [ngStyle]="{'display':display}">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" aria-label="Close" (click)="onCloseHandled()"><span aria-hidden="true">&times;</span></button>
      </div>
      <div class="modal-body">
            <div class="form-group">
      		    <label class="control-label col-sm-2" for="email">Ammount to Buy:</label>
      			<div class="col-sm-10">
      	 			<input type="number" [(ngModel)]="buyAmmount" min="0" max="coinToBuy.availableCryptos" name="buyAmmount" class="form-control" placeholder="Available Cryptos" required autofocus="">
      	 		</div>
      	    </div>
      	    <div class="form-group">
      	    	<br>
				<div class="btn-group col-sm-offset-2 col-sm-10">
      	    		<button type="button" class="btn btn-default" [disabled]="!buyAmmount || buyAmmount > (coinToBuy && coinToBuy.availableCryptos)" (click)="buyCoin(buyAmmount)">Buy</button>
      	    		<button type="button" class="btn btn-default" (click)="buyAmmount = undefined">Reset</button>
      	    		<button type="button" class="btn btn-default" (click)="onCloseHandled()" >Close</button>
      	    	</div>
      	    </div>
      </div>
<!--       <div class="modal-footer">
      </div> -->
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div>

<div *ngIf="currentUserRoles === 'user' && currentCoinStatus.length">
	<h3>Your Coin Account</h3>
	<table class="table table-striped table-hover">
	    <thead>
	      <tr>
	        <th>Ticker</th>
	        <th>Balance</th>
	      </tr>
	    </thead>
	    <tbody>
	      <tr *ngFor="let item of currentCoinStatus">
	        <td>{{ item.ticker }}</td>
	        <td>{{ item.bal }}</td>
	    </tbody>
	</table>
</div>